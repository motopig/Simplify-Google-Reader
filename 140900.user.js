// ==UserScript==
// @name           Simple Google Reader
// @author         kshift
// @namespace      http://kshiftlv.github.com/
// @description    Clarifies google reader and makes reading interface fair and distinct. Hope you will like it. :)
// @include        http://*.google.*/reader/*
// @include        https://*.google.*/reader/*
// @include        htt*://*.google.*/reader/view*
// @updateURL      http://userscripts.org/scripts/show/140900
// @version        2.0.1
// @license        MIT license
// @copyright      2012+, kshift <kshift.lv@gmail.com>
// ==/UserScript==
function ApplyCSS() {
  var refButton, searchButton;
    var cssDefalut = "#gbq1{display:none!important;}#gbqlt{display:none!important;}#my-search-button{float:left;}div.section_header_holder{margin-top:0!important;}h2.section_header{text-align:left!important;}.entry .entry-container{padding-left:1em!important;padding-right:1em!important;}#lhn-add-subscription{top:50%!important;margin-top:-15px!important;}#main #nav{background:rgba(243,241,239,.8)!important;border-bottom:1px solid #a7a2a0!important;}#lhn-add-subscription-section{height:36px!important;}.jfk-button-primary{background-color:#F8F8F8!important;background-image:-webkit-linear-gradient(top,#F8F8F8,#ECECEC)!important;background-image:-moz-linear-gradient(top,#F8F8F8,#ECECEC)!important;color:#777!important;border-color:#C6C6C6!important;}#sub-tree-header{border-left:0!important;}.lhn-section-primary{display:block!important;background:-webkit-gradient(linear,left top,left bottom,color-stop(0, #E2E2E2),color-stop(0.1, rgb(246, 244, 242)),color-stop(0.9, rgb(233, 231, 229)),color-stop(1, rgb(223, 221, 219)))!important;background:-moz-linear-gradient(top,rgb(256, 254, 252),rgb(246, 244, 242) 10%,rgb(233, 231, 229) 90%,rgb(223, 221, 219))!important;height:26px!important;margin-left:0!important;margin-bottom:-2px!important;text-indent:10px!important;font-size:12px;line-height:26px!important;color:#646464!important;text-shadow:#fff 0 1px 0;}.lhn-section-primary span{font-weight:500!important;}#sub-tree{background:#faf8f5!important;}div#nav li{background:transparent!important;line-height:32px!important;}div#nav ul#sub-tree li.folder ul .sub-icon,div#nav ul#sub-tree li.folder ul .folder-toggle,div#nav ul#sub-tree li.folder ul .folder-icon{margin-top:5px!important;}div#nav ul#sub-tree li.folder ul li.folder ul li.sub{margin-left:8px!important;}div#nav ul#sub-tree li.folder > ul li.sub > a{border-bottom:1px solid #f0eeec!important;}div#nav ul#sub-tree li.folder > ul li.sub > a:hover{background:#fff!important;}.scroll-tree li.folder .link,.scroll-tree li.sub{height:32px!important;}#viewer-header-container{border-bottom:0!important;}#viewer-header{height:34px!important;}#viewer-top-controls-container{margin-top:-14px!important;}div#home,div.card div.entry-container{width:95%!important;margin:0 auto!important;}body.lhn-hidden div#home,body.lhn-hidden div.card div.entry-container{width:90%!important;margin:0 auto!important;}div.entry-container{background:#FAF8F9!important;}div#entries{top:-10px!important;margin-left:-5px!important;}div#viewer-top-controls{height:26px!important;min-width:400px!important;}div#chrome{border-left:1px solid #929393!important;background:#faf9f8!important;}div.card{border:0!important;background:transparent!important;-webkit-box-shadow:none!important;-moz-box-shadow:none!important;margin-top:1em!important;}#current-entry .card .card-content,.card .card-content{padding:1em 0 0!important;}div.entry div.entry-main{margin-left:24px!important;}a.entry-title-link{background:transparent!important;}.entry .entry-body div.item-body{margin-top:.8em!important;}.entry .entry-body div.item-body h3{clear:both;margin-top:1em!important;}.entry .entry-body div.item-body ol,.entry .entry-body div.item-body ul{display:block!important;padding-left:0!important;margin-left:2em!important;clear:left;}.entry .entry-body div.item-body ol li,.entry .entry-body div.item-body ul li{margin-bottom:.8em!important;}.entry .entry-body div.item-body dt{color:#000!important;}div.entry-author,.collapsed div.entry-date,div.entry-container div.entry-date{color:#969696!important;}div.entry-container div.entry-date{float:right!important;margin-top:5px!important;}.collapsed div.entry-date{margin-top:2px!important;margin-right:8px!important;}div.single-source .collapsed div.entry-date{margin-top:10px!important;}h2.entry-title{clear:left;display:block;}div.card-content h2.entry-title{-webkit-transition-duration:400ms!important;-moz-transition-duration:400ms!important;opacity:.6!important;top:24px!important;position:relative;margin-bottom:36px!important;}h2.entry-title a{color:#2e2e2d!important;font-size:24px;line-height:32px;font-weight:500!important;}div#current-entry h2.entry-title{opacity:1!important;}.entry .item-body,.entry .entry-body,.entry .entry-title,.entey .entry-likers{max-width:96%!important;}div.entry-main{overflow:hidden!important;}div.card div.entry-author{position:absolute!important;top:4px!important;font-size:12px!important;clear:left!important;display:block!important;}span.entry-author-parent{display:none!important;font-style:italic!important;}div.card-actions{-moz-border-radius:0!important;border-radius:0!important;border-bottom:1px dotted #c4c1bf!important;padding-bottom:3.2em!important;padding-left:22px!important;}div.entry-actions{margin-left:2.1%!important;}div.entry-actions span{color:#7c7a79!important;opacity:0;}div#current-entry.expanded div.entry-actions span,div.entry:hover div.card-actions span,div#current-entry div.card-actions span{opacity:1;}div.entry-0{padding-top:0!important;}.entry .item-body,.entry .entry-body{padding-top:0!important;font-size:16px!important;line-height:32px!important;color:#646464!important;font-weight:400!important;text-shadow:#fff 0 1px 0;}.entry .item-body p em,.entry .entry-body p em{color:#46464b!important;}.entry .entry-body p strong{color:#464646!important;font-weight:500;}.entry .entry-body code pre{background:#f5f3f3!important;-moz-border-radius:4px!important;border-radius:4px!important;-webkit-box-shadow:#fff 0 1px 0!important;-moz-box-shadow:#fff 0 1px 0!important;color:#323232!important;text-shadow:#fff 0 0 3px;line-height:22px!important;padding:16px 24px;}.entry .entry-body p img{clear:both!important;display:block!important;max-width:100%!important;height:auto!important;margin:1em 4px!important;}.entry .entry-body hr{height:0!important;border:none;border-top:1px solid #aaaaaf;border-bottom:1px solid #fff;}div.entry blockquote{border-left:1px dotted rgba(136,134,133,.4);margin-left:4px!important;padding-left:36px!important;color:#46464b!important;text-shadow:#fff 0 1px 0;}div.entry ul li,div.entry ol li{margin-bottom:.7em!important;}div.entry-body div dl dd{margin-left:1.2em!important;margin-bottom:.5em!important;}div#home div#overview span.overview-item-link{font-size:13px!important;line-height:20px!important;}div#entries.search div.search-result span.entry-date,div.collapsed span.entry-source-title,.collapsed div.entry-date,div.entry-container div.entry-date{color:#b4b4b4!important;}div#entries.search div.search-result span.entry-date,.collapsed div.entry-date,div.entry-container div.entry-date{font-size:11px!important;text-transform:uppercase;}.entry .entry-body blockquote{font-style:italic!important;}div#home div#overview span.item-title{font-size:18px!important;line-height:22px!important;color:#323232!important;margin-bottom:.4em!important;}div#chrome-header span#chrome-title a{font-size:14px;}::-webkit-scrollbar{width:4px;}::-webkit-scrollbar-button:start:decrement,::-webkit-scrollbar-button:end:increment{height:4px;display:block;background-color:transparent;}::-webkit-scrollbar-thumb:vertical{background:rgba(100,100,102,.3);border-radius:4px;height:80px;}::-webkit-scrollbar-track-piece:vertical{background-color:#fff;border-left:1px solid rgba(210,210,210,.2);}#viewer-header,#viewer-container,div.card-content{background:#faf9f8!important;}#gbx1,#top-bar{height:50px!important;background-color:#F8F8F8!important;background-image:-webkit-linear-gradient(top,whiteSmoke,#E9E9E9)!important;border-bottom:1px solid #CCC!important;}#gbq2,#gbu,h1#logo,#search{padding-top:8px!important;}#gbx1,#gbq,#gbu,#gb.gbesi #gbx1,#gb.gbesi #gbq,#gb.gbesi #gbu{top:0!important;}#nav,#logo-container,#lhn-add-subscription-section,#scrollable-sections-top-shadow,#scrollable-sections-bottom-shadow{max-width:225px!important;width:225px!important;}#chrome{margin-left:225px!important;}#search{margin-left:225px!important;padding-left:3px!important;}.lhn-hidden #chrome{margin-left:0!important;}.folder .folder .name-text{max-width:92px!important;}.folder .name-text,#reading-list-selector .label{max-width:85px!important;}.lhn-section-no-unread-counts .folder .folder .name-text,#lhn-recommendations .folder .folder .name-text{max-width:131px!important;}.lhn-section-no-unread-counts .folder .folder .name-text.folder-name-text{max-width:138px!important;}#lhn-selectors .selector-icon,.scroll-tree .icon{width:0!important;}#entries.list .collapsed .entry-secondary{margin-right:7em!important;}#entries .collapsed .entry-date{margin:0 2em 0 0 !important;}.card-common .card-actions,.entry .entry-actions{height:0!important;padding:0!important;}#entries.list .entry .entry-actions > span{background:none!important;}.item-body img,.item-body a img,.item-body embed{max-width:100%!important;height:auto!important;}#entries .entry-body,.entry .entry-title,.name-text{max-width:none!important;}#logo-section,#title-and-status-holder,.state-stream div.entry-author div.entry-via,div.single-source.cards div.entry-author,#gbzw,#gbx3,#gbar,#guser,#gbx1,#gbq,#gbu,#top-bar,#home-section,#lhn-selectors,#lhn-recommendations,a:hover .tree-item-action-container,.menu-open .tree-item-action-container,.entry .entry-title .entry-title-go-to,#chrome-title .chevron,#current-entry.action-area-visible .entry-actions,#current-entry.active-action-area .entry-actions,.entry .entry-actions .item-star,.entry .entry-actions .email,.entry .entry-actions .tag,.entry .entry-actions .item-link{display:none!important;}div.entry-main p iframe,div.entry-body span.link.popout{display:none;}div.single-source.cards div.card-content h2.entry-title,div#entries.single-source.cards div#current-entry div.card-content h2.entry-title{top:0!important;margin-bottom:0!important;}.entry .item-body p,.entry .entry-body p,div#home div#overview div.overview-metadata{margin-bottom:2em!important;}#gb,#top-bar,#gbqlw,#gbq,#gb{height:auto!important;}#gbx3,#gbx1{position:static!important;}";
  
  refButton = document.getElementById('viewer-refresh');
  if (refButton) {
    searchButton = document.createElement('div');
    searchButton.setAttribute('class', 'goog-inline-block jfk-button jfk-button-standard viewer-buttons');
    searchButton.setAttribute('id', 'my-search-button');
    searchButton.setAttribute('role', 'button');
    searchButton.setAttribute('style', '-webkit-user-select: none;');
    searchButton.setAttribute('onclick', 'ShowSearchBar()');
    searchButton.appendChild(document.createTextNode('搜索'));
    refButton.parentNode.insertBefore(searchButton, refButton.nextSibling);
  }
  GM_addStyle(cssDefalut);
}
unsafeWindow.ShowSearchBar = function() {
  var cssSearchBar = "#gbx1,#gbq{display:block!important;}#gb{height:0!important;}#gbq{width:0!important;margin-top:-5px!important;left:568px!important}#gbqfqw{width:180px!important;}#gbqfbw{display:none!important;}";
  GM_addStyle(cssSearchBar);
}
ApplyCSS();